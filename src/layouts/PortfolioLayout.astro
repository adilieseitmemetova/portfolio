---
import Project from '../components/Project.astro';
import SiteHeader from '../components/SiteHeader.astro';
import SiteFooter from '../components/SiteFooter.astro';
import '../styles/portfolio.css';

type Study = {
	title: string;
	description: string;
};

const { t } = Astro.props;
const studies: Study[] = Array.isArray((t as any).studies)
	? ((t as any).studies as Study[])
	: [];
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/favicon.png" />
		<meta name="generator" content={Astro.generator} />
		<title>{t.metaTitle}</title>
		<meta name="description" content={t.metaDescription} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Imperial+Script&display=swap"
			rel="stylesheet"
		/>
		<script is:inline>
			if ('scrollRestoration' in history) {
				history.scrollRestoration = 'manual';
			}
			window.addEventListener('load', () => {
				window.scrollTo(0, 0);

				const codeEl = document.querySelector('.hero-subtitle-code');
				if (!codeEl) return;

				const prefersReducedMotion =
					window.matchMedia &&
					window.matchMedia('(prefers-reduced-motion: reduce)').matches;

				if (prefersReducedMotion) return;

				const fullText = (codeEl.textContent || '').trim();
				codeEl.textContent = '';

				let index = 0;
				const typeSpeed = 90;
				const startDelay = 1800;
				const pauseBeforeDot = 620;
				const dotIndex = fullText.lastIndexOf('.') >= 0
					? fullText.lastIndexOf('.') + 1
					: -1;

				const typeNext = () => {
					if (index > fullText.length) return;
					codeEl.textContent = fullText.slice(0, index);
					index += 1;
					if (index <= fullText.length) {
						const isBeforeDot =
							dotIndex !== -1 && index === dotIndex;
						const delay = isBeforeDot ? pauseBeforeDot : typeSpeed;
						setTimeout(typeNext, delay);
					}
				};

				setTimeout(typeNext, startDelay);
			});
		</script>
	</head>
	<body>
		<SiteHeader
			logoLabel={t.logo}
			nav={{
				home: t.navHome,
				projects: t.navProjects,
				about: t.navAbout,
				contact: t.navContact,
			}}
		/>

		<main id="home">
			<section class="hero">
				<div class="container hero-content">
					<div class="hero-inner">
						<span class="hero-badge">AI lover</span>
						<h1 class="hero-title">{t.heroTitle}</h1>
						<p class="hero-subtitle">
							<span class="hero-subtitle-main">
								{t.heroSubtitleMain}
							</span>
							<span class="hero-subtitle-connector">
								{t.heroSubtitleConnector}
							</span>
							<span class="hero-subtitle-code">
								{t.heroSubtitleCode}
							</span>
						</p>
						<p class="hero-location">{t.heroLocation}</p>
						<div class="hero-actions">
							<a href="#projects" class="btn primary">
								{t.heroPrimaryCta}
							</a>
							<a href="#contact" class="btn secondary">
								{t.heroSecondaryCta}
							</a>
						</div>
					</div>
				</div>
			</section>

				<section id="projects" class="project-showcase">
					<Project
						title="DoYouSpeakGaultier"
						dates={t.projectFeaturedDates}
						description={t.projectFeaturedDescription}
						tags={t.projectFeaturedTags}
						imageSrc="/images/dysg/DYSG_cover.jpg"
						imageAlt="Eatcue product cover with mobile app interface"
						href="/projects/dysg"
					/>
				</section>

				<section class="project-showcase">
					<Project
						title="SHAAARE"
						dates="2024"
						description="A social sharing concept exploring playful, experimental interactions."
						tags={['Product Design', 'Concept']}
						imageSrc="/images/shaaare/shaaare_cover.jpg"
						imageAlt="Placeholder cover for shaaare project"
						href="/projects/shaaare"
					/>
				</section>

				<section class="project-showcase">
					<Project
						title="IK-Generator"
						dates="2024"
						description="An AI-powered generator for interfaces and key visual directions."
						tags={['AI', 'Tools', 'Exploration']}
						imageSrc="/images/ik-generator/ik-generator_cover.jpg"
						imageAlt="Placeholder cover for ik-generator project"
						href="/projects/ik-generator"
					/>
				</section>

				<section class="project-showcase">
					<Project
						title="Ko Social Network"
						dates="2024"
						description="A concept for a minimal, cozy social network experience."
						tags={['Product Design', 'Social']}
						imageSrc="/images/ko_social_network/ksn_cover.jpg"
						imageAlt="Placeholder cover for ko social network project"
						href="/projects/ko-social-network"
					/>
				</section>

			<section id="about" class="section">
				<div class="container">
					<h2 class="section-title">{t.aboutTitle}</h2>
					<p class="section-text">{t.aboutText}</p>
					{studies.length > 0 && (
						<div class="about-studies">
							<h3 class="about-subtitle">{t.studiesTitle}</h3>
							<ul class="about-studies-list">
								{studies.map((item: Study) => (
									<li class="about-studies-item">
										<div class="about-studies-item-title">
											{item.title}
										</div>
										<div class="about-studies-item-detail">
											{item.description}
										</div>
									</li>
								))}
							</ul>
						</div>
					)}
				</div>
			</section>

			<section id="contact" class="section">
				<div class="container">
					<h2 class="section-title">{t.contactTitle}</h2>
					<p class="section-text">{t.contactText}</p>
					<ul class="contact-list">
						<li>
							<strong>{t.contactEmailLabel}</strong>
							<span>{t.contactEmailPlaceholder}</span>
						</li>
					</ul>
				</div>
			</section>
		</main>

		<SiteFooter copyright={t.footerCopyright} />
	</body>
</html>
